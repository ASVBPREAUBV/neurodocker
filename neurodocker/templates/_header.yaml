# Instructions to be run in the beginning of every Dockerfile generated by
# Neurodocker.

generic:
  dependencies:
    apt: apt-utils bzip2 ca-certificates curl locales unzip
    yum: bzip2 ca-certificates curl locales unzip
  env:
    LANG: "en_US.UTF-8"
    LC_ALL: "C.UTF-8"
    ND_ENTRYPOINT: "/neurodocker/startup.sh"
  instructions: |
    {install_deps}
    && localedef --force --inputfile=en_US --charmap=UTF-8 C.UTF-8
    && chmod 777 /opt && chmod a+s /opt
    && mkdir -p "$(dirname $ND_ENTRYPOINT)"
    && if [ ! -f "$ND_ENTRYPOINT" ]; then
         echo '#!/usr/bin/env bash' >> $ND_ENTRYPOINT
         && echo 'set -ex' >> $ND_ENTRYPOINT
         && echo 'if [ -z "$*" ]; then /usr/bin/env bash; else $*; fi' >> $ND_ENTRYPOINT;
       fi
    && chmod -R 777 /neurodocker && chmod a+s /neurodocker

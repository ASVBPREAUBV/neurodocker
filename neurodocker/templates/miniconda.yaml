# Instructions to install Miniconda.
#
# Website: https://conda.io/miniconda.html

generic:
  binaries:
    env:
      CONDA_DIR: "{{ miniconda.install_path }}"
      PATH: "{{ miniconda.install_path }}/bin:$PATH"
    instructions: |
      echo "Downloading Miniconda installer ..."
      conda_installer="/tmp/miniconda.sh"
      curl -sSL --retry 5 -o "$conda_installer" {{ miniconda.binaries_url }}
      bash "$conda_installer" -b -p {{ miniconda.install_path }}
      rm -f "$conda_installer"
      conda config --system --prepend channels conda-forge
      conda config --system --set auto_update_conda false
      conda config --system --set show_channel_urls true
      sync && conda clean -tipsy && sync

# Instructions to install Miniconda.
#
# Website: https://conda.io/miniconda.html

generic:
  binaries:
    env:
      CONDA_DIR: "{{ miniconda.install_path }}"
      PATH: "{{ miniconda.install_path }}/bin:$PATH"
    instructions: |
      echo "Downloading Miniconda installer ..."
      CONDA_INSTALLER="/tmp/miniconda.sh"
      curl -sSL --retry 5 -o "$CONDA_INSTALLER" {{ miniconda.binaries_url }}
      bash "$CONDA_INSTALLER" -b -p "$CONDA_DIR"
      rm -f "$CONDA_INSTALLER"
      conda config --system --prepend channels conda-forge
      conda config --system --set auto_update_conda false
      conda config --system --set show_channel_urls true
      sync && conda clean -tipsy && sync
